<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Single Page Apps for GitHub Pages</title>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // https://github.com/rafrex/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // This script converts the path and query string into a query string
      // and redirects the browser to the new URL with only a query string and hash fragment

      // If this script is already running (check by a specific query parameter), do nothing
      if (window.location.search.indexOf("redirected=true") === -1) {
        var segmentCount = 1;
        var l = window.location;

        // Construct the new URL
        var newUrl =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          l.pathname
            .split("/")
            .slice(0, 1 + segmentCount)
            .join("/") +
          "/?p=/" +
          l.pathname.slice(1).split("/").slice(segmentCount).join("/") +
          (l.search ? "&q=" + l.search.slice(1).replace(/&/g, "~and~") : "") +
          l.hash;

        // Append a query parameter to avoid infinite redirect loop
        if (!l.search.includes("redirected=true")) {
          newUrl += (l.search ? "&" : "?") + "redirected=true";

          // Redirect to the new URL
          window.location.replace(newUrl);
        }
      }
    </script>
  </head>
  <body></body>
</html>
